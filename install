#!/bin/bash
set -e
echo "[I] Installing Hyprland and related dependencies..."
main_packages=(
  hyprland
  alacritty
  hyprshot
  rofi
  hyprpaper
  waybar
  pcmanfm
  dunst
  pulseaudio
)
optional_packages=(
  playerctl
  brightnessctl
  wireplumber  
)

echo "[I] Updating system..."
sudo pacman -Syu --noconfirm

echo "[I] Installing main packages..."
sudo pacman -S --needed --noconfirm "${main_packages[@]}"

echo "[I] Installing optional packages..."
sudo pacman -S --needed --noconfirm "${optional_packages[@]}"

echo "[I] Copying dotfiles to ~/.config..."
mkdir -p ~/.config

for dir in alacritty dunst hypr rofi waybar waypaper; do
    if [ -d "$dir" ]; then
        echo "[I] Installing $dir/"
        cp -r "$dir" ~/.config/
    else
        echo "[W] Missing $dir/, skipping..."
    fi
done

if [ -f "starship.toml" ]; then
    cp starship.toml ~/.config/
    echo "[I] Installed starship.toml"
else
    echo "[W] starship.toml not found, skipping..."
fi

echo "[I] Installation complete."
echo "[I] You may need to log out and select Hyprland from your display manager."

